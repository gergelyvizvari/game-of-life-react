import M,{M as n,d as N,e as G,u as T,g as k,c as x,j as s,a as R}from"./__federation_expose_SingleCell-230ec84e.js";import{r as e}from"./index-f90a43bd.js";function v(){const o=e.useRef(null),i=e.useRef(0),r=e.useRef(n.GENERATE_MAP),t=e.useRef(!1);let a;const[m,u]=e.useState([]),[E,A]=e.useState(1),c=e.useCallback(()=>{if(performance.now()-a>N){switch(r.current){case n.GENERATE_MAP:r.current=n.EVOLVE,u(k());break;case n.NEW_GENERATION:r.current=n.EVOLVE,u(f=>T(f));break;case n.EVOLVE:r.current=n.NEW_GENERATION,u(f=>G(f));break}a=performance.now()}t.current||(i.current=requestAnimationFrame(c))},[]);e.useEffect(()=>(a=performance.now(),o.current&&(A(o.current.offsetWidth/x),c()),()=>{cancelAnimationFrame(i.current)}),[o,c]);const b=e.useMemo(()=>m.map((d,l)=>s(M,{cell:d,index:l,size:E},l)),[m,E]),h=()=>{r.current=n.GENERATE_MAP,t.current&&p()},w=()=>{t.current=!t.current,t.current||(a=performance.now(),i.current=requestAnimationFrame(c))},p=()=>{t.current&&(a=performance.now()-N,i.current=requestAnimationFrame(c))};return R("div",{style:{width:"100%"},children:[R("div",{className:"flex",children:[s("button",{className:"btn pb-2",onClick:h,children:"Restart"}),s("button",{className:"btn pb-2",onClick:w,children:t.current?"continue":"Pause"}),t.current&&s("button",{className:"btn pb-2",onClick:p,children:"Next"})]}),s("div",{style:{position:"relative",width:"100%"},ref:o,children:b})]})}export{v as default};
